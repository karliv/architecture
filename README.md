Знакомство с проектом
=====================

Добро пожаловать в учебный проект Geekbrains курса "Архитектура веб-приложений"!

Этот проект мы будем дорабатывать на протяжении 8 уроков. В текущем виде в нём намеренно добавлены ошибки и недоработки.

В разделе "Структура проекта" находится описание проекта и его частей. "Внешние библиотеки" поясняет задачи основных
вендоровских библиотек, которые использованы в проекте. В разделе "Инструментарий" рассказывается о достпуных
инструментах и как запустить во время разработки свой веб-сервер. "Решение проблем" содержит информацию о
распространённых ошибках.


Структура проекта
-----------------

<Скоро здесь что-то будет написано>


Внешние библиотеки
------------------

### Конфигурирование

Компонент для работы с конфигурационными файлами из различных источников (YAML, XML, INI или база данных). Реализует
возможность находить, загружать, комбинировать, автозаполнять и проверять значения конфигурации любого типа.

[Документация](https://symfony.com/doc/current/components/config.html)

[Github](https://github.com/symfony/config)


### Внедрение зависимости (Dependency Injection)

Библиотека реализующая контейнер внедрения зависимости (Dependency Injection Container. DIC). В её задачи входит
внедрение зависимости как описано Мартином Фаулером, а также хранием зависимостей между компонентами системы и их связи.
Благодаря этому вам не приходиться заботиться об инстанцировании объектов.
В данном проекте DIC используется исключительно для оперирования конфигурационных данных, но вы можете доработать проект
и начать его использовать полноценно.

[Документация](https://symfony.com/doc/current/components/dependency_injection.html)

[Github](https://github.com/symfony/dependency-injection)


### HTTP обёртка

Обёртка над суперглобальными переменными такими как $_POST, $_GET, $_FILES, $_COOKIE, $_SESSION. Компонент предоставляет
объектно-ориентированный слой представление HTTP запросов к серверу и помогает предотвратить использование
суперглобальных переменных. Также в нём инкапсулированы вызовы для работы с HTTP, поэтому он умеет работать с функциями
echo, header(),  setcookie() и многими другими.

[Документация](https://symfony.com/doc/current/components/http_foundation.html)

[Github](https://github.com/symfony/http-foundation)


### Роутинг (Routing)

Роутинг помогает создавать красивые урлы вида /product/info/10 вместо давно устаревших /product/info.php?id=10 .
Другой прекрасной особенностью библиотеки является возможность легко изменить урл с /super_products/info на /product/info
не переписывая его во всех местах проекта. 

[Документация](https://symfony.com/doc/current/routing.html)

[Github](https://github.com/symfony/routing)



Инструментарий
--------------

Для работы с проектом вам понадобится версия php не ниже 7.1.0 и [composer](https://getcomposer.org/download/).

Далее перейдите в корневую папку проекта, из которой можно будет выполнить ряд полезных команд. 

Перед началом работ с проектом, а также после каждого изменения файла composer.lock, не забывайте
скачивать/обновлять внешние библиотеки и зависимости выполнив
```bash
composer install
```

Во время разработки можно использовать встроенный в php веб-сервер выполнив команду
```bash
php -S 0.0.0.0:8080 -t web
```
либо короткий алиас
```bash
composer on
```
Возможные проблемы и их решения при работе с веб-сервером описаны в следующем разделе.

Никогда не пренебрегайте тестами, поэтому перед каждым коммитом запускайте юнит-тесты
```bash
bin/phpunit
```
либо алиас
```bash
composer test
```

Чтобы код был аккуратно написан с использованием стандарта кодирования PSR-1 и PSR-2 переодически выполняйте команду
```bash
bin/php-cs-fixer -vvv fix --dry-run
```
либо алиас
```bash
composer check
```
а чтобы не только проверить код, но и автоматически исправить выполняйте
```bash
bin/php-cs-fixer fix
```
либо алиас
```bash
composer fix
```


Решение проблем
---------------

1. Где находится конфигурационный файл php.ini ?
```bash
php -i | grep 'Configuration File'
```

2. Где находится файл логов?
```bash
php -i | grep error_log
```

3. Как добавить файл с логами, если он не прописан в конфигурационном файле, или изменить его место расположения?

Откройте файл php.ini (как его найти рассказывается в пункте 1). Найдите секцию error_log. Если она закоментирована
(точка с запятой в начале строки), то раскоментируйте её. Далее измените значение строки, чтобы оно стало
`error_log = /tmp/php_errors.log`. Перезапустите веб-сервер, если он включен. На этом всё, теперь файл с логами будет
находится по пути /tmp/php_errors.log

4. Как запустить интерпрететор со своим конфигурационным файлом?

Если ваш файл находится по пути /etc/php.ini.test, то каждый раз при запуске веб-сервера выполните её следующим образом
```bash
php -S 0.0.0.0:8080 -t web -c /etc/php.ini.test
```
